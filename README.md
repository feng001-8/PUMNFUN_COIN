# PumpFun 金狗预警系统需求文档

## 项目概述

### 项目背景

基于链智平台（Chain Insight）的金狗预警功能，开发一个专业的 PumpFun 代币早期发现和预警系统，实现对 Solana 生态中 PumpFun 平台新代币的实时监控和智能分析。

### 项目目标

- 实时监控 PumpFun 平台新上线代币
- 智能分析代币潜力和风险指标
- 提供多维度预警机制
- 支持个性化预警策略配置
- 集成社群情绪和 KOL 钱包追踪

## 核心功能需求

### 1. 实时代币监控

#### 1.1 新币发现引擎

- **实时扫描**：每10-30秒扫描 PumpFun 平台新上线代币
- **基础信息采集**：
  - 代币名称、符号、合约地址
  - 创建时间、创建者地址
  - 初始流动性、代币总量
  - 社交媒体链接（如有）

#### 1.2 交易数据监控

- **价格数据**：实时价格、涨跌幅（1分钟、5分钟、15分钟、1小时、24小时）
- **交易量数据**：成交量、成交笔数、活跃交易者数量
- **流动性数据**：当前流动性、流动性变化趋势
- **持币分析**：持币地址数、持币分布、新增持币者

### 2. 智能分析引擎

#### 2.1 技术指标分析

- **价格动量指标**

  - 短期涨幅检测（1分钟、5分钟内涨幅 > 50%）
  - 价格突破检测（突破关键阻力位）
  - 成交量价格背离分析
- **交易活跃度指标**

  - 交易量突增检测（较前期增长 > 300%）
  - 交易频率分析
  - 大额交易监控
- **社区增长指标**

  - 持币地址增长率（> 100个/小时）
  - 新用户流入速度
  - 社区活跃度评分

#### 2.2 风险评估系统

- **合约安全分析**

  - 合约代码安全性检测
  - 权限函数分析（mint、burn、pause等）
  - 流动性锁定状态检查
  - 开发者钱包行为分析
- **市场风险指标**

  - 巨鲸持币比例（前10地址持币比例）
  - 流动性集中度
  - 价格操控风险评估
  - 抛售压力分析

### 3. 预警系统

#### 3.1 金狗预警机制

**触发条件（需同时满足多项）：**

- 5分钟内涨幅 > 50%
- 交易量较前期增长 > 300%
- 持币地址数增长 > 100个/小时
- 合约安全评分 > 80分
- 流动性 > 10 SOL
- 无明显巨鲸操控迹象

**预警等级：**

- 🔥 超级金狗：满足所有条件且表现突出
- ⭐ 潜力金狗：满足大部分条件
- 📈 关注代币：满足部分条件，值得关注

#### 3.2 风险预警机制

**风险预警类型：**

- 🚨 高风险警告：检测到严重风险信号
- ⚠️ 中等风险：存在一定风险，需谨慎
- 📊 异常交易：交易行为异常，疑似操控

**风险触发条件：**

- 开发者钱包大量抛售（> 20%持仓）
- 流动性快速撤出（1小时内减少 > 50%）
- 合约存在高风险函数
- 持币过度集中（前5地址持币 > 60%）
- 价格异常波动（短时间内暴涨暴跌）

### 4. KOL 钱包追踪

#### 4.1 KOL 数据库管理

- **KOL 钱包地址库**：维护知名交易员、机构、影响者钱包地址
- **分类管理**：按影响力、专业领域、成功率分类
- **动态更新**：定期更新和验证 KOL 地址有效性

#### 4.2 KOL 行为监控

- **交易行为追踪**：实时监控 KOL 买入/卖出操作
- **持仓分析**：KOL 当前持仓、持仓时长、收益率
- **信号生成**：基于 KOL 行为生成跟单信号
- **成功率统计**：统计 KOL 历史操作成功率

### 5. 社群情绪分析

#### 5.1 社交媒体监控

- **Twitter/X 监控**：关键词、话题标签、提及次数
- **Telegram 群组**：消息频率、情绪倾向、用户活跃度
- **Discord 社区**：讨论热度、成员增长、互动质量

#### 5.2 情绪指数计算

- **情绪评分**：基于文本分析计算正面/负面情绪比例
- **热度指数**：综合提及次数、互动量、传播范围
- **趋势分析**：情绪变化趋势、热度变化曲线

### 6. 用户界面设计

#### 6.1 实时监控面板

- **代币列表**：实时更新的代币信息表格
- **筛选排序**：按价格涨幅、交易量、市值等排序
- **自定义视图**：用户可自定义显示列和刷新频率
- **图表展示**：价格走势图、交易量图、持币分布图

#### 6.2 预警管理界面

- **预警设置**：个性化预警条件配置
- **通知方式**：邮件、短信、Telegram Bot、桌面通知
- **预警历史**：历史预警记录和效果统计
- **策略回测**：预警策略的历史表现分析

#### 6.3 分析工具

- **代币详情页**：单个代币的深度分析页面
- **对比工具**：多个代币的对比分析
- **市场概览**：整体市场趋势和热点分析
- **数据导出**：支持数据导出为 CSV、JSON 格式

## 技术架构设计（Mac M1 本地版）

### 系统架构

#### 整体架构

- **架构模式**：单机全栈应用
- **运行环境**：Mac M1 本地开发环境
- **数据存储**：本地文件系统 + 内存缓存
- **部署方式**：本地启动，无需服务器

#### 性能优化（针对M1芯片）

- **多进程架构**：利用M1多核优势
- **内存管理**：充分利用M1统一内存架构
- **原生性能**：使用ARM64优化的Node.js版本

### 技术栈选型（Mac M1优化版）

#### 后端技术栈

- **主要语言**：Node.js 20+ LTS (ARM64版本)
- **Web框架**：Fastify 4.24.3（比Express更快，M1友好）
- **数据库**：
  - SQLite 3.44.0（本地文件数据库，无需安装）
  - Node.js内置Map/Set（内存缓存，替代Redis）
- **区块链交互**：
  - @solana/web3.js 1.87.6（最新版，M1优化）
  - @coral-xyz/anchor 0.29.0（替代旧版anchor）
- **实时通信**：Socket.io 4.7.4
- **任务调度**：node-cron 3.0.3
- **HTTP客户端**：undici 5.28.2（Node.js官方，比axios更快）
- **进程管理**：cluster模块（利用M1多核）

#### 前端技术栈

- **主要语言**：TypeScript 5.3+
- **前端框架**：React 18.2.0
- **状态管理**：Zustand 4.4.7（轻量级，M1友好）
- **UI组件库**：
  - Ant Design 5.12.8
  - Tailwind CSS 3.4.0
- **图表库**：
  - Recharts 2.8.0（轻量级，性能好）
  - Chart.js 4.4.0（替代react-chartjs-2）
- **实时通信**：Socket.io-client 4.7.4
- **构建工具**：Vite 5.0.10（M1原生支持，极快构建）
- **开发工具**：
  - @vitejs/plugin-react-swc（SWC编译器，M1优化）
  - ESBuild（Rust编写，M1性能优异）

#### 数据分析（本地优化版）

- **语言**：Node.js（与后端统一）
- **数据处理**：
  - Lodash-es 4.17.21（ES模块版本）
  - D3.js 7.8.5
- **技术指标计算**：
  - Technicalindicators 3.1.0
  - 自定义算法（充分利用M1性能）
- **并行计算**：Worker Threads（M1多核优势）
